@page
@model IndexModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    ViewData["Title"] = "CryptoScout";
}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
<link rel="stylesheet" href="~/css/Index.css" asp-append-version="true" />

<section class="wrap">
  <div class="topbar">
    <div class="brand">
      <h1>CryptoScout</h1>
      <p>Top 100 prices (USD) cached every 30 minutes. Generate AI picks, then chat about them. Not financial advice.</p>
    </div>

    <div class="top-actions">
      <a class="source" href="https://github.com/RayanBhatti/CryptoScout" target="_blank" rel="noopener" title="View source on GitHub">
        <i class="bi bi-github" aria-hidden="true" style="font-size:18px;line-height:1"></i>
        <span>Source</span>
      </a>
      <button id="themeToggle" class="btn btn-ghost" title="Toggle theme" aria-label="Toggle theme">
        <i id="themeIcon" class="bi bi-moon-stars" aria-hidden="true"></i>
      </button>
    </div>
  </div>

  <div class="grid">
    <!-- Left: Prices table -->
    <div class="card">
      <div class="section-head section-head--stack">
        <div class="controls controls--grow">
          <input id="q" class="input input--full" placeholder="Filter by name/symbol…" aria-label="Filter coins" />
        </div>
        <div class="controls controls--grow">
          <button id="refresh" class="btn btn--block-sm">Refresh</button>
          <button id="genReco" class="btn btn-green btn--block-sm">Generate AI Shortlist</button>
        </div>
      </div>

      <div class="table-wrap">
        <table id="grid" aria-label="Top 100 crypto table">
          <colgroup>
            <col style="width:56px" />
            <col />
            <col style="width:160px" />
            <col style="width:120px" />
            <col style="width:160px" />
          </colgroup>
          <thead>
            <tr>
              <th>#</th>
              <th class="th-coin">Coin</th>
              <th class="num">Price</th>
              <th class="num">1y %</th>
              <th class="num hide-sm">1y</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div class="section-head section-head--stack" style="border-top:1px solid var(--border); border-bottom: none;">
        <span id="pageInfo" class="meta"></span>
        <div class="controls">
          <button id="prev" class="btn btn--block-sm">Previous</button>
          <button id="next" class="btn btn--block-sm">Next</button>
        </div>
      </div>
    </div>

    <!-- Right: Chat -->
    <div class="card chat-card">
      <div class="section-head" style="justify-content:flex-start; gap:.75rem;">
        <span style="font-weight:600;">Chat about the latest picks</span>
      </div>
      <div id="chatLog" aria-live="polite"></div>
      <div class="chatInput">
        <label for="chatInput" class="sr">Message</label>
        <textarea id="chatInput" rows="2" placeholder="Ask about the picks… (e.g., Why SOL over ETH?)"></textarea>
        <button id="sendChat" class="btn">Send</button>
      </div>
    </div>
  </div>
</section>

<script src="~/js/Index.js" asp-append-version="true"></script>
