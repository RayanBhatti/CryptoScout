@page
@model IndexModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    ViewData["Title"] = "CryptoScout";
}

<link rel="stylesheet" href="~/css/Index.css" asp-append-version="true" />

<div class="bg-effects" aria-hidden="true"></div>

<section class="wrap">
  <div class="topbar">
    <div class="brand">
      <h1>CryptoScout</h1>
      <p>Top 100 prices (USD) cached every 30 minutes. Generate AI picks, then chat about them. Not financial advice.</p>
    </div>
    <a class="source" href="https://github.com/RayanBhatti/CryptoScout" target="_blank" rel="noopener" title="View source on GitHub">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <path d="M12 .5C5.73.5.99 5.24.99 11.5c0 4.85 3.15 8.96 7.51 10.41.55.1.75-.24.75-.53 0-.26-.01-.95-.02-1.85-3.05.66-3.69-1.47-3.69-1.47-.5-1.27-1.22-1.6-1.22-1.6-.99-.68.07-.67.07-.67 1.1.08 1.68 1.13 1.68 1.13.97 1.66 2.54 1.18 3.16.9.1-.7.38-1.18.69-1.45-2.44-.28-5-1.22-5-5.45 0-1.2.43-2.18 1.13-2.95-.11-.28-.49-1.43.1-2.98 0 0 .93-.3 3.05 1.13.89-.25 1.85-.37 2.8-.37.95 0 1.9.12 2.8.37 2.11-1.43 3.04-1.13 3.04-1.13.59 1.55.21 2.7.1 2.98.7.77 1.13 1.75 1.13 2.95 0 4.24-2.57 5.16-5.02 5.44.39.34.73 1.02.73 2.06 0 1.49-.01 2.69-.01 3.06 0 .29.2.64.76.53 4.35-1.45 7.5-5.56 7.5-10.41C23.01 5.24 18.27.5 12 .5z"/>
      </svg>
      <span>Source</span>
    </a>
  </div>

  <div class="grid">
    <!-- Left: Prices table -->
    <div class="card">
      <div class="section-head">
        <div class="controls">
          <input id="q" class="input" placeholder="Filter by name/symbol…" aria-label="Filter coins" />
        </div>
        <div class="controls">
          <button id="refresh" class="btn">Refresh</button>
          <button id="genReco" class="btn btn-green">Generate AI Shortlist</button>
        </div>
      </div>

      <div class="table-wrap">
        <table id="grid" aria-label="Top 100 crypto table">
          <thead>
            <tr>
              <th>#</th>
              <th>Coin</th>
              <th class="num">Price</th>
              <th class="num">1y %</th>
              <th class="num">1y</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div class="section-head" style="border-top:1px solid var(--border); border-bottom: none;">
        <span id="pageInfo" class="meta"></span>
        <div class="controls">
          <button id="prev" class="btn">Previous</button>
          <button id="next" class="btn">Next</button>
        </div>
      </div>
    </div>

    <!-- Right: Chat -->
    <div class="card" style="display:flex; flex-direction:column;">
      <div class="section-head" style="justify-content:flex-start; gap:.75rem;">
        <span style="font-weight:600;">Chat about the latest picks</span>
      </div>
      <div id="chatLog" aria-live="polite"></div>
      <div class="chatInput">
        <label for="chatInput" class="sr">Message</label>
        <textarea id="chatInput" rows="2" placeholder="Ask about the picks… (e.g., Why SOL over ETH?)"></textarea>
        <button id="sendChat" class="btn">Send</button>
      </div>
    </div>
  </div>
</section>

<script src="~/js/Index.js" asp-append-version="true"></script>
